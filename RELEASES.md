# üöÄ Creating Releases for BioDockViz

This guide explains how to create new releases for BioDockViz, automatically building installers and updating version numbers across all files.

## Quick Release

```powershell
# Bump version and create release
.\scripts\bump-version.ps1 -NewVersion "1.0.1" -CreateRelease
```

This will:
1. ‚úÖ Update version in all files (`backend/config.py`, `frontend/package.json`, `installer.nsi`)
2. ‚úÖ Update `CHANGELOG.md` with new version entry
3. ‚úÖ Commit changes
4. ‚úÖ Create git tag (e.g., `v1.0.1`)
5. ‚úÖ Push to GitHub
6. ‚úÖ Trigger GitHub Actions to build installer and create release

## Manual Release Process

### Step 1: Update Version Numbers

Update version in these files:
- `backend/config.py` ‚Üí `BIO_DOCK_VERSION = "1.0.1"`
- `frontend/package.json` ‚Üí `"version": "1.0.1"`
- `installer.nsi` ‚Üí `VIProductVersion "1.0.1.0"`
- `installer.nsi` ‚Üí `OutFile "BioDockViz-Setup-1.0.1.exe"`

### Step 2: Update CHANGELOG.md

Add a new entry:
```markdown
## [1.0.1] - 2024-01-15

### Added
- New feature description

### Fixed
- Bug fix description
```

### Step 3: Commit and Tag

```bash
git add .
git commit -m "Bump version to v1.0.1"
git tag -a v1.0.1 -m "BioDockViz v1.0.1"
git push origin main
git push origin v1.0.1
```

### Step 4: GitHub Actions Auto-Build

Once the tag is pushed, GitHub Actions will automatically:
- üèóÔ∏è Build Windows installer
- üê≥ Build Docker images
- üîê Generate checksums (SHA256, MD5)
- üì¶ Create GitHub release
- ‚¨ÜÔ∏è Upload artifacts

### Step 5: Edit Release Notes

1. Go to https://github.com/tajo9128/biodockviz/releases
2. Find the auto-created release
3. Edit release notes (add changelog, screenshots, etc.)
4. Publish release

## Version Numbering

BioDockViz follows [Semantic Versioning](https://semver.org/):

- **Major** (`1.x.x`): Breaking changes, major rewrites
- **Minor** (`x.1.x`): New features, backwards compatible
- **Patch** (`x.x.1`): Bug fixes, minor improvements

### Examples

- `v1.0.0` ‚Üí Initial release
- `v1.0.1` ‚Üí Bug fix release
- `v1.1.0` ‚Üí New feature (e.g., additional file format support)
- `v2.0.0` ‚Üí Major rewrite with breaking changes

## Release Checklist

Before creating a release:

- [ ] All tests passing
- [ ] Documentation updated
- [ ] CHANGELOG.md updated
- [ ] Version numbers consistent across all files
- [ ] Tested on clean Windows VM
- [ ] README.md reflects current features

## Automated Release Workflow

The `.github/workflows/release.yml` workflow handles:

1. **Building Installer**
   - Compiles frontend (Next.js build + export)
   - Packages backend (PyInstaller)
   - Creates NSIS installer

2. **Generating Checksums**
   - SHA256 hash
   - MD5 hash
   - Verification file

3. **Building Docker Images**
   - Multi-stage builds for backend/frontend
   - Tags with version number and `latest`
   - Pushes to Docker Hub

4. **Creating GitHub Release**
   - Uploads installer executable
   - Uploads checksum files
   - Uses RELEASE_NOTES.md as release body

## Manual Build (Local Testing)

Before creating an official release, test locally:

```powershell
# Build installer
.\scripts\build-installer.ps1 -Clean

# Generate checksums
.\scripts\generate-checksums.ps1 -File "BioDockViz-Setup-1.0.1.exe"

# Verify
.\scripts\verify-checksum.ps1 -File "BioDockViz-Setup-1.0.1.exe" -ChecksumFile "BioDockViz-Setup-1.0.1.exe.sha256"
```

## Release Artifacts

Each release includes:

- `BioDockViz-Setup-X.X.X.exe` - Windows installer
- `BioDockViz-Setup-X.X.X.exe.sha256` - SHA256 checksum
- `BioDockViz-Setup-X.X.X.exe.md5` - MD5 checksum
- Source code (zip/tar.gz) - Auto-generated by GitHub

## Hotfix Releases

For critical bug fixes:

```powershell
# Create hotfix version
.\scripts\bump-version.ps1 -NewVersion "1.0.2" -CreateRelease

# Cherry-pick fixes if needed
git cherry-pick <commit-hash>
```

## View All Releases

**BioDockViz Releases:** https://github.com/tajo9128/biodockviz/releases

## Troubleshooting

### GitHub Actions Failed

1. Check workflow run: https://github.com/tajo9128/biodockviz/actions
2. Review error logs
3. Fix issues and re-push tag:
   ```bash
   git tag -d v1.0.1
   git push origin :refs/tags/v1.0.1
   git tag -a v1.0.1 -m "BioDockViz v1.0.1 (Fixed)"
   git push origin v1.0.1
   ```

### Installer Build Failed

- Ensure NSIS is installed
- Check frontend builds successfully (`npm run build`)
- Verify backend dependencies (`pip install -r requirements.txt`)

---

**Happy Releasing! üöÄ**
